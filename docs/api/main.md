# üèó SpendScope API Documentation

–ë—ç–∫–µ–Ω–¥-—á–∞—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã SpendScope –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –±–∞–∑–µ ASP.NET Core —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ì–∏–±—Ä–∏–¥ *Clean Architecture** *(–¥–ª—è —á–µ—Ç–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å–ª–æ–µ–≤)* –∏ **Vertical Slice Architecture** *(–¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –ø–æ —Ñ–∏—á–∞–º)*.
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: **PostgreSQL** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Ardalis.Specification** –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥–∏–±–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- **–õ–æ–≥–∏–∫–∞ –∏ –ú–µ–¥–∏–∞—Ç–æ—Ä**: **MediatR** –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ CQRS.
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: **FluentValidation** –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: **Serilog** —Å –∑–∞–ø–∏—Å—å—é –≤ —Ç–∞–±–ª–∏—Ü—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π **Correlation ID** –¥–ª—è —Å–∫–≤–æ–∑–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞—â–∏—Ç—ã:

1. **Hashing**: –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ **Argon2** *(—É—Å—Ç–æ–π—á–∏–≤ –∫ –ø–µ—Ä–µ–±–æ—Ä—É –∏ GPU-–∞—Ç–∞–∫–∞–º)*.
2. **JWT Auth**: –î–æ—Å—Ç—É–ø –ø–æ —Ç–æ–∫–µ–Ω–∞–º —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ —Ä–æ–ª—è–º.
3. **IP Validation**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Äî —Å–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ IP-–∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å IP, ¬´–≤—à–∏—Ç—ã–º¬ª –≤ JWT —Ç–æ–∫–µ–Ω –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
4. **Rate Limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç brute-force –∏ —Å–ø–∞–º–∞ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ API.

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫**

- **Custom Result**: –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Flutter –∏ WPF –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
- **Health Checks**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–≥—Ä—É–∑–∫–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞.

**–†–∞–±–æ—Ç–∞ —Å –º–µ–¥–∏–∞**

- **Image Optimization**: –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–≤–∞—Ç–∞—Ä–æ–≤ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **ImageSharp**. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Image Formatter, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ –ª–µ—Ç—É –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∏ –ø–æ–¥–≥–æ–Ω—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–¥ –Ω—É–∂–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏ —Ä–∞–∑–º–µ—Ä—ã.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Clean Architecture + Vertical Slices)

–ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å *(–Ω–∞–ø—Ä–∏–º–µ—Ä, "–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏" –∏–ª–∏ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è")* —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –≤—Å—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã: –æ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

```
SpendScope/
‚îî‚îÄ‚îÄ api/
    ‚îú‚îÄ‚îÄ Application/
    ‚îÇ   ‚îú‚îÄ‚îÄ Abstractions/    # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤
    ‚îÇ   ‚îî‚îÄ‚îÄ Features/        # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ä–µ–∑—ã (Logic, Commands, Queries)
    ‚îú‚îÄ‚îÄ Infrastructure/
    ‚îÇ   ‚îú‚îÄ‚îÄ DataBase/        # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, Entity Framework, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
    ‚îÇ   ‚îî‚îÄ‚îÄ Services/        # Image Formatter, Storage, JWT, Hashing –∏ —Ç–ø.
    ‚îú‚îÄ‚îÄ Domain/
    ‚îÇ   ‚îú‚îÄ‚îÄ Abstractions/    # –ë–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, result
    ‚îÇ   ‚îú‚îÄ‚îÄ Specifications/  # –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è Ardalis.Specification
    ‚îÇ   ‚îî‚îÄ‚îÄ Entities/        # –°—É—â–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    ‚îî‚îÄ‚îÄ Web/                 # API –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
        ‚îú‚îÄ‚îÄ Controllers/     # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
        ‚îî‚îÄ‚îÄ Program.cs       # –ó–∞–ø—É—Å–∫ API, DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç–Ω–¥–ø–æ–∏–Ω—Ç:
`GET /api/health/detailed` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ë–î, –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏ –ø–∞–º—è—Ç–∏.

–î–∞–Ω–Ω—ã–µ –ë–î —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ PostgreSQL. –î–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è EF Core.